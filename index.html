<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ¢ç´¢å¤§è„‘ - äº’åŠ¨å¼å¤§è„‘å¤–ä¾§è§†å›¾</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: "Microsoft Yahei", "Segoe UI", Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #fff;
      overflow-x: hidden;
    }

    /* é¡¶éƒ¨å¯¼èˆª */
    header {
      position: fixed;
      top: 0;
      width: 100%;
      background: rgba(102, 126, 234, 0.95);
      backdrop-filter: blur(10px);
      padding: 15px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 1000;
      box-shadow: 0 2px 20px rgba(0,0,0,0.3);
    }
    header h1 {
      font-size: 1.8rem;
      font-weight: 600;
      letter-spacing: 1px;
    }
    nav a {
      color: #fff;
      text-decoration: none;
      margin-left: 25px;
      font-size: 1rem;
      transition: color 0.3s;
    }
    nav a:hover {
      color: #ffd700;
    }

    /* ç¬¬ä¸€å±ï¼šå¤§è„‘2Då›¾è°±å±•ç¤ºåŒº */
    #hero-section {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      padding-top: 70px;
    }

    #brain-container {
      width: 85%;
      max-width: 800px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 30px;
    }

    .section-title {
      text-align: center;
      margin-bottom: 20px;
    }

    .section-title h2 {
      font-size: 2.8rem;
      color: #ffd700;
      text-shadow: 2px 2px 10px rgba(0,0,0,0.5);
      margin-bottom: 10px;
    }

    .section-title p {
      font-size: 1.2rem;
      opacity: 0.9;
      max-width: 800px;
      line-height: 1.6;
    }

    /* å¤§è„‘åœ°å›¾å®¹å™¨ */
    #brain-map-container {
      width: 100%;
      max-width: 800px;
      position: relative;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 10px 50px rgba(0,0,0,0.5);
      margin: 0 auto;
    }

    #brain-map {
      width: 100%;
      height: auto;
      display: block;
      cursor: pointer;
    }

    /* åŒºåŸŸé«˜äº®æ•ˆæœ */
    .region-highlight {
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s;
      z-index: 5;
      mix-blend-mode: multiply;
    }

    .region-highlight.active {
      opacity: 0.8;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { filter: drop-shadow(0 0 5px rgba(255, 215, 0, 0.7)); }
      50% { filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.9)); }
      100% { filter: drop-shadow(0 0 5px rgba(255, 215, 0, 0.7)); }
    }

    /* æ‚¬æµ®ä¿¡æ¯æç¤ºæ¡† */
    #hoverInfo {
      position: absolute;
      top: 50%;
      right: 50px;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(15px);
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 15px;
      padding: 25px;
      width: 300px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s ease;
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
      z-index: 100;
    }
    #hoverInfo.show {
      opacity: 1;
      pointer-events: auto;
    }
    #hoverInfo h3 {
      font-size: 1.4rem;
      margin-bottom: 10px;
      color: #ffd700;
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
    }
    #hoverInfo p {
      font-size: 0.95rem;
      line-height: 1.6;
      margin-bottom: 15px;
      color: #ff6b35;
      font-weight: 600;
    }
    #hoverInfo button {
      width: 100%;
      padding: 10px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      border-radius: 8px;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.2s;
    }
    #hoverInfo button:hover {
      transform: scale(1.05);
    }

    /* è¯¦ç»†ä¿¡æ¯å±•ç¤ºåŒº */
    #detail-section {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 2000;
      display: none;
      padding-top: 70px;
    }
    #detail-section.active {
      display: flex;
    }
    #detail-left {
      width: 50%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 30px;
    }
    #detail-brain-container {
      width: 100%;
      height: 70%;
      border-radius: 15px;
      overflow: hidden;
      background: rgba(255, 255, 255, 0.05);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    #detail-image {
      max-width: 90%;
      max-height: 90%;
      object-fit: contain;
      transition: transform 0.5s ease;
    }
    #detail-left h2 {
      font-size: 2.2rem;
      margin-top: 20px;
      color: #ffd700;
      text-align: center;
    }
    #detail-right {
      width: 50%;
      height: 100%;
      padding: 50px;
      overflow-y: auto;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.3) 0%, rgba(118, 75, 162, 0.3) 100%);
    }
    #detail-right h3 {
      font-size: 1.5rem;
      margin-top: 30px;
      margin-bottom: 15px;
      color: #a8daff;
    }
    #detail-right p, #detail-right ul {
      font-size: 1.1rem;
      line-height: 1.8;
      margin-bottom: 15px;
    }
    #detail-right ul {
      padding-left: 25px;
    }
    #closeDetail {
      position: absolute;
      top: 90px;
      right: 30px;
      background: rgba(255, 255, 255, 0.2);
      border: 2px solid #fff;
      color: #fff;
      font-size: 1.5rem;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
    }
    #closeDetail:hover {
      background: rgba(255, 255, 255, 0.4);
      transform: rotate(90deg);
    }

    /* å†…å®¹åŒºåŸŸ */
    .content-section {
      min-height: 100vh;
      padding: 80px 50px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    /* æ¸¸æˆåŒº */
    #game-section {
      background: linear-gradient(135deg, rgba(118, 75, 162, 0.8) 0%, rgba(102, 126, 234, 0.8) 100%);
    }

    .games-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 40px;
      width: 100%;
      max-width: 900px;
      margin-top: 40px;
    }

    .game-card {
      width: 400px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 35px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.4);
      transition: transform 0.3s;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .game-card:hover {
      transform: translateY(-10px);
    }

    .game-icon {
      font-size: 3.5rem;
      margin-bottom: 25px;
    }

    .game-card h3 {
      font-size: 1.8rem;
      margin-bottom: 15px;
      color: #ffd700;
      text-align: center;
    }

    .game-card p {
      font-size: 1.1rem;
      line-height: 1.6;
      margin-bottom: 30px;
      text-align: center;
    }

    .game-card button {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      border-radius: 12px;
      color: white;
      font-size: 1.2rem;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .game-card button:hover {
      transform: scale(1.05);
    }

    /* è§†é¢‘åŒº */
    #video-section {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.8) 0%, rgba(118, 75, 162, 0.8) 100%);
    }

    .videos-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 40px;
      width: 100%;
      max-width: 1200px;
      margin-top: 40px;
    }

    .video-card {
      width: 500px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 8px 30px rgba(0,0,0,0.3);
      transition: transform 0.3s;
    }

    .video-card:hover {
      transform: translateY(-10px);
    }

    .video-thumbnail {
      width: 100%;
      height: 250px;
      object-fit: cover;
      cursor: pointer;
    }

    .video-card-content {
      padding: 25px;
    }

    .video-card h3 {
      font-size: 1.5rem;
      margin-bottom: 15px;
      color: #ffd700;
    }

    .video-card p {
      font-size: 1rem;
      line-height: 1.6;
      margin-bottom: 20px;
    }

    .video-card button {
      width: 100%;
      padding: 12px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      border-radius: 8px;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .video-card button:hover {
      transform: scale(1.05);
    }

    /* æ›´å¤šå­¦ä¹ é“¾æ¥ */
    #more-link {
      text-align: center;
      margin-top: 50px;
      padding: 20px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      width: 100%;
      max-width: 800px;
    }

    #more-link a {
      color: #ffd700;
      font-size: 1.2rem;
      font-weight: bold;
      text-decoration: none;
      transition: all 0.3s;
      display: inline-block;
      padding: 10px 20px;
      border: 2px solid #ffd700;
      border-radius: 10px;
    }

    #more-link a:hover {
      background-color: #ffd700;
      color: #333;
    }

    /* è°ƒè¯•é¢æ¿æ ·å¼ - éšè— */
    #debug-panel {
      font-family: 'Consolas', 'Monaco', monospace;
      display: none !important; /* éšè—è°ƒè¯•é¢æ¿ */
    }

    /* åæ ‡æ˜¾ç¤ºæ¡† */
    #coordinate-display {
      position: fixed;
      top: 100px;
      left: 20px;
      background: rgba(0,0,0,0.8);
      color: white;
      padding: 10px 15px;
      border-radius: 8px;
      font-family: monospace;
      font-size: 12px;
      z-index: 1000;
      display: none;
      border: 1px solid rgba(255,215,0,0.3);
    }

    /* æ»šåŠ¨æ¡ç¾åŒ– */
    ::-webkit-scrollbar {
      width: 10px;
    }
    ::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.1);
    }
    ::-webkit-scrollbar-thumb {
      background: rgba(255, 215, 0, 0.5);
      border-radius: 5px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: rgba(255, 215, 0, 0.8);
    }

    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 1100px) {
      #detail-section {
        flex-direction: column;
      }
      #detail-left, #detail-right {
        width: 100%;
        height: 50%;
      }
      #detail-right {
        padding: 30px;
      }
      .video-card {
        width: 100%;
        max-width: 500px;
      }
    }

    @media (max-width: 768px) {
      header {
        flex-direction: column;
        padding: 15px;
      }
      nav {
        margin-top: 15px;
      }
      nav a {
        margin: 0 10px;
      }
      .game-card {
        width: 100%;
        max-width: 400px;
        padding: 25px;
      }
      .content-section {
        padding: 60px 20px;
      }
      #hoverInfo {
        position: fixed;
        top: auto;
        bottom: 30px;
        right: 30px;
        left: 30px;
        transform: none;
        width: auto;
      }
      #debug-panel {
        display: none;
      }
      #coordinate-display {
        display: none !important;
      }
    }
  </style>
</head>
<body>
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <header>
    <h1>ğŸ§  æ¢ç´¢å¤§è„‘ - å¤–ä¾§è§†å›¾</h1>
    <nav>
      <a href="#hero-section">å¤§è„‘å›¾è°±</a>
      <a href="#game-section">äº’åŠ¨æ¸¸æˆ</a>
      <a href="#video-section">ç§‘æ™®è§†é¢‘</a>
    </nav>
  </header>

  <!-- ç¬¬ä¸€å±ï¼šå¤§è„‘2Då›¾è°± -->
  <section id="hero-section">
    <div id="brain-container">
      <div class="section-title">
        <h2>å¤§è„‘å¤–ä¾§è§†å›¾</h2>
        <p>å¤§è„‘å¤–ä¾§è§†å›¾å±•ç¤ºå¤§è„‘çš®å±‚çš„å¤–è¡¨é¢ï¼ŒåŒ…æ‹¬é¢å¶ã€é¡¶å¶ã€é¢å¶ã€æ•å¶ã€å°è„‘ä»¥åŠè„‘å¹²ï¼ˆè„‘æ¡¥å’Œå»¶é«“ï¼‰ç­‰åŒºåŸŸã€‚æ¯ä¸ªåŒºåŸŸéƒ½æœ‰ç‹¬ç‰¹çš„åŠŸèƒ½ï¼Œå…±åŒåä½œå®Œæˆå¤æ‚çš„è®¤çŸ¥å’Œè¡Œä¸ºæ´»åŠ¨ã€‚</p>
      </div>

      <div id="brain-map-container">
        <!-- å¤§è„‘å›¾ç‰‡ -->
        <img id="brain-map" src="images/brain.jpg" alt="å¤§è„‘å¤–ä¾§è§†å›¾">
        <!-- é«˜äº®åŒºåŸŸå®¹å™¨ - ç°åœ¨æ”¹ä¸ºé€æ˜çš„divå±‚ -->
        <div id="highlight-container" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;"></div>
      </div>

      <!-- æ‚¬æµ®ä¿¡æ¯æç¤ºæ¡† -->
      <div id="hoverInfo">
        <h3 id="regionName">æ‚¬æµ®æŸ¥çœ‹è„‘åŒº</h3>
        <p id="regionBrief">å°†é¼ æ ‡ç§»åŠ¨åˆ°å¤§è„‘å›¾è°±ä¸Šä¸åŒé¢œè‰²çš„åŒºåŸŸï¼ŒæŸ¥çœ‹å„ä¸ªè„‘åŒºçš„åŠŸèƒ½ç®€ä»‹</p>
        <button id="learnMoreBtn" style="display:none;">æ·±å…¥äº†è§£</button>
      </div>
    </div>
  </section>

  <!-- è¯¦ç»†ä¿¡æ¯å±•ç¤ºåŒº -->
  <div id="detail-section">
    <button id="closeDetail">âœ•</button>
    <div id="detail-left">
      <div id="detail-brain-container">
        <img id="detail-image" src="" alt="è„‘åŒºè¯¦ç»†ç»“æ„å›¾">
      </div>
      <h2 id="detailRegionName">è„‘åŒºåç§°</h2>
    </div>
    <div id="detail-right">
      <h3>ğŸ“ ä½ç½®ä¸ç»“æ„</h3>
      <p id="detailLocation">ä½ç½®æè¿°...</p>
      <h3>âš¡ ä¸»è¦åŠŸèƒ½</h3>
      <p id="detailFunction">åŠŸèƒ½æè¿°...</p>
      <h3>ğŸ”¬ åŒ…å«åˆ†åŒºåŠåŠŸèƒ½</h3>
      <div id="detailSubregions">
        <!-- åˆ†åŒºå†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
      </div>
      <h3>ğŸ¥ ç›¸å…³ç–¾ç—…</h3>
      <p id="detailDisease">ç–¾ç—…ä¿¡æ¯...</p>
    </div>
  </div>

  <!-- æ¸¸æˆåŒº -->
  <section id="game-section" class="content-section">
    <div class="section-title">
      <h2>ğŸ§© å¤§è„‘çŸ¥è¯†äº’åŠ¨æ¸¸æˆ</h2>
      <p>é€šè¿‡æœ‰è¶£çš„æ¸¸æˆåŠ æ·±å¯¹å¤§è„‘ç»“æ„çš„ç†è§£å’Œè®°å¿†ï¼Œæ¯ä¸ªæ¸¸æˆéƒ½é’ˆå¯¹å¤§è„‘å­¦ä¹ çš„ä¸åŒæ–¹é¢</p>
    </div>

    <div class="games-container">
      <!-- æ¸¸æˆ1ï¼šå¤§è„‘åˆ†åŒºé…å¯¹ -->
      <div class="game-card">
        <div class="game-icon">ğŸ§ </div>
        <h3>å¤§è„‘åˆ†åŒºé…å¯¹</h3>
        <p>å°†å¤§è„‘å„åˆ†åŒºåç§°ä¸å®ƒä»¬çš„åŠŸèƒ½æè¿°æ­£ç¡®é…å¯¹ï¼Œæµ‹è¯•ä½ å¯¹å¤§è„‘ç»“æ„çš„äº†è§£ç¨‹åº¦ã€‚</p>
        <button id="game1Btn">å¼€å§‹æ¸¸æˆ</button>
      </div>

      <!-- æ¸¸æˆ2ï¼šå¤§è„‘åŠŸèƒ½é—®ç­” -->
      <div class="game-card">
        <div class="game-icon">â“</div>
        <h3>å¤§è„‘åŠŸèƒ½é—®ç­”</h3>
        <p>å›ç­”å…³äºå¤§è„‘åŠŸèƒ½çš„å„ç§é—®é¢˜ï¼ŒæŒ‘æˆ˜ä½ çš„å¤§è„‘çŸ¥è¯†ï¼Œçœ‹çœ‹ä½ èƒ½ç­”å¯¹å¤šå°‘é¢˜ã€‚</p>
        <button id="game2Btn">å¼€å§‹æ¸¸æˆ</button>
      </div>
    </div>
  </section>

  <!-- è§†é¢‘å­¦ä¹ åŒº -->
  <section id="video-section" class="content-section">
    <div class="section-title">
      <h2>ğŸ“º å¤§è„‘ç§‘æ™®è¶£å‘³è§†é¢‘</h2>
      <p>é€šè¿‡ç”ŸåŠ¨çš„è§†é¢‘è®²è§£ï¼Œæ·±å…¥äº†è§£å¤§è„‘çš„ç»“æ„å’ŒåŠŸèƒ½ï¼Œé€‚åˆåˆå­¦è€…ç³»ç»Ÿå­¦ä¹ å¤§è„‘çŸ¥è¯†</p>
    </div>

    <div class="videos-container">
      <!-- è§†é¢‘1ï¼šå¤§è„‘å¤–ä¾§è§†å›¾è®²è§£ -->
      <div class="video-card">
        <img class="video-thumbnail" src="https://img.bilibili.com/8d7f1a6b4a2f4c9e8b0f3c7d9e5f8a2b.jpg" alt="å¤§è„‘å¤–ä¾§è§†å›¾åŸºæœ¬è®²è§£">
        <div class="video-card-content">
          <h3>å¤§è„‘å¤–ä¾§è§†å›¾åŸºæœ¬è®²è§£</h3>
          <p>è¯¦ç»†è®²è§£å¤§è„‘å¤–ä¾§è§†å›¾çš„ç»“æ„ï¼ŒåŒ…æ‹¬é¢å¶ã€é¡¶å¶ã€é¢å¶å’Œæ•å¶çš„ä½ç½®ã€åˆ†åŒºå’Œä¸»è¦åŠŸèƒ½ã€‚</p>
          <button id="video1Btn">è§‚çœ‹è§†é¢‘</button>
        </div>
      </div>

      <!-- è§†é¢‘2ï¼šå¤§è„‘å†…ä¾§è§†å›¾è®²è§£ -->
      <div class="video-card">
        <img class="video-thumbnail" src="https://img.bilibili.com/9e8f2b7c5d3a1f4e8c0b5d7f9a2c4e6d.jpg" alt="å¤§è„‘å†…ä¾§è§†å›¾åŸºæœ¬è®²è§£">
        <div class="video-card-content">
          <h3>å¤§è„‘å†…ä¾§è§†å›¾åŸºæœ¬è®²è§£</h3>
          <p>è®²è§£å¤§è„‘å†…ä¾§è§†å›¾çš„ç»“æ„ï¼ŒåŒ…æ‹¬èƒ¼èƒä½“ã€ä¸˜è„‘ã€ä¸‹ä¸˜æµ·ç­‰å†…éƒ¨ç»“æ„çš„åŠŸèƒ½å’Œç›¸äº’å…³ç³»ã€‚</p>
          <button id="video2Btn">è§‚çœ‹è§†é¢‘</button>
        </div>
      </div>
    </div>

    <!-- æ›´å¤šå­¦ä¹ é“¾æ¥ -->
    <div id="more-link">
      <p style="margin-bottom: 15px; font-size: 1.1rem;">æƒ³äº†è§£æ›´å¤šå…³äºå¤§è„‘çš„çŸ¥è¯†å—ï¼Ÿ</p>
      <a href="https://search.bilibili.com/all?keyword=%E4%BA%BA%E7%9A%84%E5%A4%A7%E8%84%91&from_source=webtop_search&spm_id_from=333.1007&search_source=5" target="_blank">ç‚¹å‡»è¿™é‡Œæ¢ç´¢æ›´å¤šå¤§è„‘ç›¸å…³å†…å®¹</a>
    </div>
  </section>

  <!-- åæ ‡æ˜¾ç¤ºæ¡† -->
  <div id="coordinate-display">x: 0, y: 0</div>

  <script>
    // ==================== å¤§è„‘åˆ†åŒºæ•°æ® ====================
    const brainRegions = {
      'frontal': {
        id: 'frontal',
        name: 'é¢å¶',
        brief: 'è´Ÿè´£å†³ç­–ã€è®¡åˆ’å’Œè¿åŠ¨æ§åˆ¶',
        location: 'ä½äºå¤§è„‘å‰éƒ¨ï¼Œå æ®é¢éª¨å†…ä¾§åŒºåŸŸï¼Œæ˜¯å¤§è„‘çš®å±‚ä¸­æœ€å¤§çš„å¶ã€‚',
        function: 'é¢å¶æ˜¯å¤§è„‘çš„"æŒ‡æŒ¥ä¸­å¿ƒ"ï¼Œè´Ÿè´£é«˜çº§è®¤çŸ¥åŠŸèƒ½ï¼ŒåŒ…æ‹¬å†³ç­–åˆ¶å®šã€é—®é¢˜è§£å†³ã€è®¡åˆ’æ‰§è¡Œã€æƒ…ç»ªè°ƒèŠ‚å’Œè¿åŠ¨æ§åˆ¶ã€‚',
        imagePath: 'images/frontal.png',
        subregions: [
          { name: 'å‰é¢å¶çš®å±‚', location: 'ä½äºé¢å¶æœ€å‰éƒ¨', description: 'è´Ÿè´£é«˜çº§è®¤çŸ¥åŠŸèƒ½ï¼ŒåŒ…æ‹¬å†³ç­–åˆ¶å®šã€é—®é¢˜è§£å†³ã€è®¡åˆ’æ‰§è¡Œå’Œæƒ…ç»ªè°ƒèŠ‚ã€‚' },
          { name: 'è¿åŠ¨çš®å±‚', location: 'ä½äºé¢å¶åéƒ¨ï¼Œä¸­å¤®å‰å›', description: 'è´Ÿè´£è‡ªä¸»è¿åŠ¨çš„è®¡åˆ’å’Œæ‰§è¡Œã€‚' }
        ],
        disease: 'é¢å¶æŸä¼¤å¯èƒ½å¯¼è‡´äººæ ¼æ”¹å˜ã€åˆ¤æ–­åŠ›ä¸‹é™ã€å†²åŠ¨è¡Œä¸ºå¢åŠ ç­‰ã€‚'
      },
      'parietal': {
        id: 'parietal',
        name: 'é¡¶å¶',
        brief: 'å¤„ç†è§¦è§‰å’Œç©ºé—´ä¿¡æ¯',
        location: 'ä½äºé¢å¶åæ–¹ï¼Œæ•å¶å‰æ–¹ï¼Œå¤´é¡¶éƒ¨ä½ï¼Œåˆ†ä¸ºä¸Šä¸‹ä¸¤éƒ¨åˆ†ã€‚',
        function: 'é¡¶å¶ä¸»è¦è´Ÿè´£å¤„ç†æ„Ÿè§‰ä¿¡æ¯ï¼Œç‰¹åˆ«æ˜¯è§¦è§‰ã€æ¸©åº¦ã€ç–¼ç—›å’Œæœ¬ä½“æ„Ÿè§‰ã€‚å®ƒè¿˜å‚ä¸ç©ºé—´å®šä½ã€æ³¨æ„åŠ›åˆ†é…å’Œæ•°å­¦è¿ç®—ã€‚',
        imagePath: 'images/parietal.png',
        subregions: [
          { name: 'åˆçº§ä½“æ„Ÿçš®å±‚', location: 'ä½äºé¡¶å¶å‰éƒ¨ï¼Œä¸­å¤®åå›', description: 'æ¥æ”¶å’Œå¤„ç†å…¨èº«çš„è§¦è§‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬è½»è§¦ã€å‹åŠ›ã€æ¸©åº¦å’Œç–¼ç—›ã€‚' },
          { name: 'é¡¶ä¸Šå°å¶', location: 'ä½äºé¡¶å¶ä¸Šéƒ¨', description: 'å‚ä¸ç©ºé—´æ³¨æ„åŠ›æ•´åˆå’Œæ‰‹çœ¼åè°ƒï¼Œå¯¹ç©ºé—´æ„ŸçŸ¥è‡³å…³é‡è¦ã€‚' }
        ],
        disease: 'é¡¶å¶æŸä¼¤å¯èƒ½å¯¼è‡´æ„Ÿè§‰ç¼ºå¤±ã€ç©ºé—´å®šå‘éšœç¢ç­‰ç—‡çŠ¶ã€‚'
      },
      'temporal': {
        id: 'temporal',
        name: 'é¢å¶',
        brief: 'è´Ÿè´£å¬è§‰å’Œè®°å¿†å½¢æˆ',
        location: 'ä½äºå¤§è„‘ä¸¤ä¾§ï¼Œå¤ªé˜³ç©´é™„è¿‘åŒºåŸŸï¼Œåˆ†ä¸ºä¸Šã€ä¸­ã€ä¸‹ä¸‰éƒ¨åˆ†ã€‚',
        function: 'é¢å¶ä¸»è¦è´Ÿè´£å¬è§‰å¤„ç†ã€è¯­è¨€ç†è§£ã€è®°å¿†å½¢æˆå’Œæƒ…ç»ªè°ƒèŠ‚ã€‚æµ·é©¬ä½“ä½äºé¢å¶å†…ä¾§ï¼Œæ˜¯è®°å¿†å½¢æˆçš„å…³é”®ç»“æ„ã€‚',
        imagePath: 'images/temporal.png',
        subregions: [
          { name: 'åˆçº§å¬è§‰çš®å±‚', location: 'ä½äºé¢å¶ä¸Šéƒ¨çš„é¢æ¨ªå›', description: 'å¤„ç†åŸºæœ¬çš„å¬è§‰ä¿¡æ¯ï¼Œå¦‚å£°éŸ³çš„é¢‘ç‡å’Œå¼ºåº¦ã€‚' },
          { name: 'æµ·é©¬ä½“', location: 'ä½äºé¢å¶å†…ä¾§æ·±éƒ¨', description: 'è´Ÿè´£è®°å¿†å½¢æˆå’Œç©ºé—´å¯¼èˆªï¼Œå¯¹é•¿æœŸè®°å¿†çš„å½¢æˆè‡³å…³é‡è¦ã€‚' }
        ],
        disease: 'é¢å¶ç™«ç—«æ˜¯æœ€å¸¸è§çš„å±€ç¶æ€§ç™«ç—«ç±»å‹ã€‚é¢å¶æŸä¼¤å¯èƒ½å¯¼è‡´è®°å¿†éšœç¢ã€å¬è§‰éšœç¢ç­‰ã€‚'
      },
      'occipital': {
        id: 'occipital',
        name: 'æ•å¶',
        brief: 'å¤„ç†è§†è§‰ä¿¡æ¯',
        location: 'ä½äºå¤§è„‘åéƒ¨ï¼Œå¤´éª¨æ•éª¨åŒºåŸŸï¼Œæ˜¯å¤§è„‘çš®å±‚ä¸­æœ€å°çš„å¶ã€‚',
        function: 'æ•å¶æ˜¯è§†è§‰ä¿¡æ¯å¤„ç†çš„ä¸­å¿ƒã€‚æ¥è‡ªçœ¼ç›çš„è§†è§‰ä¿¡å·ç»è¿‡è§†ç¥ç»ä¼ é€’åˆ°æ•å¶çš„åˆçº§è§†è§‰çš®å±‚ï¼Œç„¶åè¿›è¡Œå¤æ‚çš„è§†è§‰ä¿¡æ¯å¤„ç†ã€‚',
        imagePath: 'images/occipital.png',
        subregions: [
          { name: 'åˆçº§è§†è§‰çš®å±‚ï¼ˆV1ï¼‰', location: 'ä½äºæ•å¶åéƒ¨ï¼Œè·çŠ¶è£‚å‘¨å›´', description: 'æ¥æ”¶æ¥è‡ªçœ¼ç›çš„ç›´æ¥è¾“å…¥ï¼Œå¤„ç†åŸºæœ¬çš„è§†è§‰ç‰¹å¾å¦‚è¾¹ç¼˜ã€æ–¹å‘å’Œç©ºé—´é¢‘ç‡ã€‚' },
          { name: 'æ¬¡çº§è§†è§‰çš®å±‚ï¼ˆV2-V5ï¼‰', location: 'ä½äºåˆçº§è§†è§‰çš®å±‚å‘¨å›´', description: 'å¤„ç†æ›´å¤æ‚çš„è§†è§‰ç‰¹å¾ï¼ŒåŒ…æ‹¬é¢œè‰²ã€å½¢çŠ¶ã€è¿åŠ¨å’Œæ·±åº¦æ„ŸçŸ¥ã€‚' }
        ],
        disease: 'æ•å¶æŸä¼¤å¯èƒ½å¯¼è‡´è§†é‡ç¼ºæŸã€è§†è§‰å¤±è®¤ã€è‰²ç›²ç­‰ç—‡çŠ¶ã€‚'
      },
      'cerebellum': {
        id: 'cerebellum',
        name: 'å°è„‘',
        brief: 'åè°ƒè¿åŠ¨å’Œå¹³è¡¡',
        location: 'ä½äºå¤§è„‘åæ–¹ï¼Œå¤§è„‘åŠçƒä¸‹æ–¹ï¼Œç”±ä¸¤ä¸ªåŠçƒå’Œä¸­é—´çš„èš“éƒ¨ç»„æˆã€‚',
        function: 'å°è„‘æ˜¯è¿åŠ¨åè°ƒä¸­å¿ƒï¼Œä¸»è¦è´Ÿè´£åè°ƒéšæ„è¿åŠ¨ã€ç»´æŒå§¿åŠ¿å’Œå¹³è¡¡ã€è°ƒèŠ‚è‚Œè‚‰å¼ åŠ›ï¼Œä»¥åŠå‚ä¸è¿åŠ¨å­¦ä¹ ã€‚',
        imagePath: 'images/cerebellum.png',
        subregions: [
          { name: 'å°è„‘åŠçƒ', location: 'ä½äºå°è„‘ä¸¤ä¾§', description: 'ä¸»è¦è´Ÿè´£å››è‚¢è¿åŠ¨çš„åè°ƒå’Œç²¾ç»†è¿åŠ¨æ§åˆ¶ã€‚' },
          { name: 'å°è„‘èš“éƒ¨', location: 'ä½äºå°è„‘ä¸­é—´éƒ¨åˆ†', description: 'ä¸»è¦è´Ÿè´£èº¯å¹²å’Œè¿‘ç«¯è‚¢ä½“çš„è¿åŠ¨åè°ƒä»¥åŠå¹³è¡¡ç»´æŒã€‚' }
        ],
        disease: 'å°è„‘æŸä¼¤å¯èƒ½å¯¼è‡´å…±æµå¤±è°ƒï¼ˆè¿åŠ¨ä¸åè°ƒï¼‰ã€å¹³è¡¡éšœç¢ã€éœ‡é¢¤ã€è‚Œå¼ åŠ›é™ä½ç­‰ç—‡çŠ¶ã€‚'
      },
      'pons': {
        id: 'pons',
        name: 'è„‘æ¡¥',
        brief: 'è¿æ¥å¤§è„‘å’Œå°è„‘ï¼Œå‚ä¸å‘¼å¸è°ƒèŠ‚',
        location: 'ä½äºè„‘å¹²ä¸­éƒ¨ï¼Œå»¶é«“ä¸Šæ–¹ï¼Œä¸­è„‘ä¸‹æ–¹ã€‚è„‘æ¡¥åç§°æ„ä¸º"æ¡¥æ¢"ï¼Œå› å…¶è¿æ¥å¤§è„‘å„éƒ¨åˆ†çš„çº¤ç»´æŸè€Œå¾—åã€‚',
        function: 'è„‘æ¡¥æ˜¯è„‘å¹²çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œè´Ÿè´£è¿æ¥å¤§è„‘çš®å±‚ä¸å°è„‘ï¼Œä¼ é€’è¿åŠ¨ä¿¡æ¯ã€‚å®ƒè¿˜åŒ…å«å‘¼å¸è°ƒèŠ‚ä¸­æ¢ï¼Œå‚ä¸ç¡çœ å’Œè§‰é†’çš„è°ƒèŠ‚ã€‚',
        imagePath: 'images/detail.png',
        subregions: [
          { name: 'è„‘æ¡¥åŸºåº•éƒ¨', location: 'ä½äºè„‘æ¡¥å‰éƒ¨', description: 'åŒ…å«å¤§é‡æ¨ªå‘å’Œçºµå‘çº¤ç»´æŸï¼Œè¿æ¥å¤§è„‘çš®å±‚å’Œå°è„‘ï¼Œä¼ é€’è¿åŠ¨ä¿¡æ¯ã€‚' },
          { name: 'å‘¼å¸è°ƒèŠ‚ä¸­æ¢', location: 'ä½äºè„‘æ¡¥è¢«ç›–éƒ¨', description: 'ä¸å»¶é«“å…±åŒè°ƒèŠ‚å‘¼å¸èŠ‚å¾‹å’Œæ·±åº¦ï¼Œç‰¹åˆ«æ˜¯è°ƒèŠ‚å¸æ°”å‘å‘¼æ°”çš„è½¬æ¢ã€‚' }
        ],
        disease: 'è„‘æ¡¥æŸä¼¤å¯èƒ½å¯¼è‡´é¢ç˜«ã€æ„Ÿè§‰éšœç¢ã€å‘¼å¸å¼‚å¸¸ã€ç¡çœ éšœç¢ç­‰ç—‡çŠ¶ã€‚'
      },
      'medulla': {
        id: 'medulla',
        name: 'å»¶é«“',
        brief: 'æ§åˆ¶åŸºæœ¬ç”Ÿå‘½åŠŸèƒ½',
        location: 'ä½äºè„‘å¹²æœ€ä¸‹éƒ¨ï¼Œè„Šé«“ä¸Šæ–¹ï¼Œè„‘æ¡¥ä¸‹æ–¹ã€‚å»¶é«“æ˜¯è¿æ¥è„‘å’Œè„Šé«“çš„å…³é”®ç»“æ„ã€‚',
        function: 'å»¶é«“æ˜¯ç”Ÿå‘½ä¸­æ¢ï¼Œæ§åˆ¶åŸºæœ¬ç”Ÿå‘½åŠŸèƒ½å¦‚å‘¼å¸ã€å¿ƒè·³å’Œè¡€å‹ã€‚å®ƒè¿˜åŒ…å«é‡è¦çš„åå°„ä¸­æ¢ï¼Œå‚ä¸åå’½ã€å’³å—½ã€å‘•åç­‰åå°„æ´»åŠ¨ã€‚',
        imagePath: 'images/detail.png',
        subregions: [
          { name: 'å¿ƒè¡€ç®¡ä¸­æ¢', location: 'ä½äºå»¶é«“ç½‘çŠ¶ç»“æ„', description: 'è°ƒèŠ‚å¿ƒç‡å’Œè¡€å‹ï¼Œç»´æŒå¿ƒè¡€ç®¡ç³»ç»Ÿçš„ç¨³å®šã€‚' },
          { name: 'å‘¼å¸ä¸­æ¢', location: 'ä½äºå»¶é«“ç½‘çŠ¶ç»“æ„', description: 'äº§ç”ŸåŸºæœ¬çš„å‘¼å¸èŠ‚å¾‹ï¼Œæ§åˆ¶å‘¼å¸çš„æ·±åº¦å’Œé¢‘ç‡ã€‚' }
        ],
        disease: 'å»¶é«“æŸä¼¤æ˜¯å±åŠç”Ÿå‘½çš„ï¼Œå¯èƒ½å¯¼è‡´å‘¼å¸åœæ­¢ã€å¿ƒè·³éª¤åœã€è¡€å‹å¤±æ§ç­‰ä¸¥é‡åæœã€‚'
      }
    };

    // ==================== åŸå§‹åæ ‡æ•°æ® ====================
    const originalCoords = {
      'frontal': "46,118,45,111,40,122,39,128,37,136,36,143,38,151,43,159,47,165,48,171,57,176,65,183,70,171,71,170,74,165,76,158,77,185,80,156,83,190,90,192,100,195,107,198,114,204,119,205,125,205,134,205,139,203,147,204,152,199,158,195,165,190,171,190,178,186,190,183,198,181,205,179,214,179,222,179,228,179,235,179,241,175,246,170,49,102,54,97,58,91,63,86,69,80,74,73,81,73,87,70,91,64,96,63,102,59,108,56,113,53,120,51,126,50,131,46,137,45,143,45,150,40,157,40,163,40,171,36,180,34,187,34,194,35,203,35,210,34,215,31,222,30,228,28,234,28,240,29,247,29,253,30,260,32,268,32,275,32,281,34,287,35,287,41,284,47,281,56,275,61,272,68,269,73,269,81,270,88,266,95,258,100,254,105,253,110,250,117,246,124,243,130,241,138,239,143,242,147,245,154,249,161",
      'parietal': "285,36,285,42,284,49,281,57,279,63,275,67,269,70,269,78,269,85,268,91,268,98,261,103,256,109,251,117,245,123,245,130,245,138,245,146,245,155,245,166,249,174,256,176,266,177,272,181,277,183,285,185,292,186,301,188,309,193,319,196,327,194,333,190,339,196,343,200,352,205,359,205,365,199,366,189,371,186,375,178,381,171,387,169,392,163,399,163,402,155,402,148,405,141,410,134,408,125,403,116,401,109,393,103,393,94,389,86,381,82,373,78,367,70,362,64,355,59,348,55,341,52,335,51,327,47,319,43,312,39,302,37,294,36",
      'occipital': "406,116,406,122,406,128,409,134,409,141,407,148,401,147,401,155,399,161,394,166,387,169,380,174,373,176,367,180,363,188,361,195,356,200,351,204,349,210,348,215,350,220,350,228,347,233,343,242,343,252,347,257,350,262,355,265,358,269,364,276,367,282,373,285,380,288,388,290,394,291,401,291,408,289,416,284,421,279,427,274,431,266,436,259,439,252,441,246,443,237,444,229,440,225,440,218,441,211,440,205,437,199,437,191,436,184,436,173,434,165,429,155,427,144,423,137,417,129,413,122",
      'temporal': "350,206,343,198,338,195,332,193,326,191,320,195,310,194,303,192,296,184,289,185,281,185,275,187,274,195,269,183,264,178,256,178,248,178,239,178,232,180,223,182,217,181,207,180,199,181,189,182,182,183,172,188,164,191,156,195,152,200,149,209,146,219,144,226,144,233,144,242,148,247,154,251,159,254,166,258,171,259,174,265,179,270,183,274,189,274,198,278,203,275,210,273,216,273,223,272,231,269,240,266,249,265,256,263,264,263,269,264,274,269,280,271,286,273,292,274,299,272,306,273,316,274,322,277,329,277,338,279,344,277,348,213,350,220,348,226,346,234,344,240,343,248,343,254,348,260,354,262,358,268,362,273,365,278,358,279,350,277",
      'cerebellum': "253,263,249,269,250,274,252,280,259,281,262,287,262,292,263,300,265,307,271,314,274,320,280,321,287,317,289,322,299,325,305,328,316,333,324,331,331,332,341,330,350,326,361,321,366,316,372,310,378,305,384,301,383,291,375,286,366,283,359,281,349,280,343,279,337,278,330,276,322,273,313,272,305,272,296,272,288,272,279,272,273,268,266,264,259,262",
      'pons': "228,272,233,274,237,277,239,282,237,287,239,294,242,299,247,303,237,268,242,266,251,265,248,270,251,277,257,284,261,291,264,298,252,302,259,302",
      'medulla': "250,309,256,307,262,301,266,307,269,315,273,320,280,321,287,324,290,330,290,336,254,316,257,324,261,330,263,335,266,343,273,345,281,344,288,343"
    };

    // ==================== å…¨å±€å˜é‡ ====================
    let currentScale = 1.45;    // ç»è¿‡æµ‹è¯•çš„æœ€ä¼˜ç¼©æ”¾å€¼
    let currentShift = 0;     // ç»è¿‡æµ‹è¯•çš„æœ€ä¼˜åç§»å€¼
    let imageMapElement = null;
    let highlightContainer = null;
    let brainMap = null;
    let highlightElements = {};
    let imageWidth = 0;
    let imageHeight = 0;
    let displayWidth = 0;
    let displayHeight = 0;

    // ==================== åˆå§‹åŒ–å‡½æ•° ====================
    function initBrainMap() {
      brainMap = document.getElementById('brain-map');
      highlightContainer = document.getElementById('highlight-container');

      // å›¾ç‰‡åŠ è½½å®Œæˆååˆ›å»ºæ˜ å°„
      brainMap.onload = function() {
        console.log('å¤§è„‘å›¾ç‰‡åŠ è½½å®Œæˆ');
        console.log('åŸå§‹å°ºå¯¸:', this.naturalWidth, 'x', this.naturalHeight);
        console.log('æ˜¾ç¤ºå°ºå¯¸:', this.width, 'x', this.height);

        // ä¿å­˜å›¾ç‰‡å°ºå¯¸ä¿¡æ¯
        imageWidth = this.naturalWidth;
        imageHeight = this.naturalHeight;
        displayWidth = this.width;
        displayHeight = this.height;

        console.log('å°ºå¯¸æ¯”ä¾‹:', displayWidth/imageWidth, displayHeight/imageHeight);

        // åˆ›å»ºå›¾ç‰‡æ˜ å°„
        createImageMap(currentScale, currentShift);

        // åˆ›å»ºé«˜äº®å±‚
        createHighlightLayer();

        // åˆå§‹åŒ–äº‹ä»¶
        initMapEvents();

        // æ·»åŠ é¼ æ ‡åæ ‡æ˜¾ç¤ºï¼ˆä½†é»˜è®¤éšè—ï¼‰
        addCoordinateDisplay();

        console.log('å¤§è„‘åœ°å›¾åˆå§‹åŒ–å®Œæˆ');
      };

      // å¦‚æœå›¾ç‰‡å·²ç»åŠ è½½å®Œæˆï¼Œç«‹å³åˆå§‹åŒ–
      if (brainMap.complete) {
        brainMap.onload();
      } else {
        brainMap.onerror = function() {
          console.error('å›¾ç‰‡åŠ è½½å¤±è´¥');
          showNotification('é”™è¯¯', 'å¤§è„‘å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶è·¯å¾„');
        };
      }
    }

    // ==================== åˆ›å»ºå›¾ç‰‡æ˜ å°„ ====================
    function createImageMap(scale = 1.0, rightShift = 0) {
      // ç§»é™¤æ—§çš„æ˜ å°„
      if (imageMapElement) {
        imageMapElement.remove();
      }

      // åˆ›å»ºæ–°çš„æ˜ å°„
      imageMapElement = document.createElement('map');
      imageMapElement.name = 'brain-map-adjusted';
      imageMapElement.id = 'brain-map-adjusted';

      // ä¸ºæ¯ä¸ªè„‘åŒºåˆ›å»ºæ˜ å°„åŒºåŸŸ
      for (const [regionId, coordsStr] of Object.entries(originalCoords)) {
        const region = brainRegions[regionId];
        if (!region) continue;

        // è§£æå¹¶è°ƒæ•´åæ ‡
        const adjustedCoords = adjustCoordinates(coordsStr, scale, rightShift);

        // åˆ›å»ºåŒºåŸŸå…ƒç´ 
        const area = document.createElement('area');
        area.shape = 'poly';
        area.coords = adjustedCoords;
        area.alt = region.name;
        area.title = region.name + ': ' + region.brief;
        area.setAttribute('data-region', regionId);

        imageMapElement.appendChild(area);
      }

      // æ·»åŠ åˆ°é¡µé¢
      document.body.appendChild(imageMapElement);

      // è®¾ç½®å›¾ç‰‡çš„æ˜ å°„
      brainMap.useMap = '#brain-map-adjusted';

      console.log(`å›¾ç‰‡æ˜ å°„å·²åˆ›å»º: ç¼©æ”¾=${scale}, åç§»=${rightShift}`);

      // åŒæ­¥æ›´æ–°é«˜äº®å±‚
      updateHighlightPositions(scale, rightShift);
    }

    // ==================== è°ƒæ•´åæ ‡å‡½æ•° ====================
    function adjustCoordinates(coordsStr, scale, rightShift) {
      const coordsArray = coordsStr.split(',').map(Number);
      const adjustedCoords = [];

      for (let i = 0; i < coordsArray.length; i += 2) {
        let x = coordsArray[i];
        let y = coordsArray[i + 1];

        // åº”ç”¨ç¼©æ”¾å’Œä½ç§»
        x = Math.round(x * scale) + rightShift;
        y = Math.round(y * scale);

        adjustedCoords.push(x, y);
      }

      return adjustedCoords.join(',');
    }

    // ==================== åˆ›å»ºé«˜äº®å±‚ ====================
    function createHighlightLayer() {
      // æ¸…ç©ºé«˜äº®å®¹å™¨
      highlightContainer.innerHTML = '';
      highlightElements = {};

      // ä¸ºæ¯ä¸ªè„‘åŒºåˆ›å»ºé«˜äº®å…ƒç´ 
      for (const [regionId, region] of Object.entries(brainRegions)) {
        const highlightElement = document.createElement('div');
        highlightElement.id = `highlight-${regionId}`;
        highlightElement.className = 'region-highlight';
        highlightElement.style.position = 'absolute';
        highlightElement.style.top = '0';
        highlightElement.style.left = '0';
        highlightElement.style.width = '100%';
        highlightElement.style.height = '100%';

        highlightContainer.appendChild(highlightElement);
        highlightElements[regionId] = highlightElement;
      }

      console.log('é«˜äº®å±‚åˆ›å»ºå®Œæˆï¼Œå…±', Object.keys(highlightElements).length, 'ä¸ªåŒºåŸŸ');
    }

    // ==================== æ›´æ–°é«˜äº®ä½ç½® ====================
    function updateHighlightPositions(scale, rightShift) {
      console.log('æ›´æ–°é«˜äº®ä½ç½®ï¼Œç¼©æ”¾:', scale, 'åç§»:', rightShift);

      // è®¡ç®—æ˜¾ç¤ºæ¯”ä¾‹
      const widthRatio = displayWidth / (imageWidth * scale);
      const heightRatio = displayHeight / (imageHeight * scale);

      // æ›´æ–°æ¯ä¸ªåŒºåŸŸçš„é«˜äº®
      for (const [regionId, coordsStr] of Object.entries(originalCoords)) {
        const coordsArray = coordsStr.split(',').map(Number);
        let points = '';

        for (let i = 0; i < coordsArray.length; i += 2) {
          let x = coordsArray[i];
          let y = coordsArray[i + 1];

          // åº”ç”¨ç›¸åŒçš„ç¼©æ”¾å’Œä½ç§»
          x = (x * scale + rightShift) * widthRatio;
          y = y * scale * heightRatio;

          points += `${x},${y} `;
        }

        const highlightElement = highlightElements[regionId];
        if (highlightElement) {
          // åˆ›å»ºSVGé«˜äº®å±‚
          highlightElement.innerHTML = `
            <svg width="${displayWidth}" height="${displayHeight}" style="position: absolute; top: 0; left: 0;">
              <defs>
                <filter id="glow-${regionId}">
                  <feGaussianBlur stdDeviation="3" result="blur"/>
                  <feFlood flood-color="#ffd700" flood-opacity="0.8"/>
                  <feComposite in2="blur" operator="in"/>
                  <feMerge>
                    <feMergeNode/>
                    <feMergeNode in="SourceGraphic"/>
                  </feMerge>
                </filter>
              </defs>
              <polygon
                points="${points}"
                fill="rgba(255, 215, 0, 0.3)"
                stroke="#ffd700"
                stroke-width="2"
                stroke-linejoin="round"
                filter="url(#glow-${regionId})"
              />
            </svg>
          `;

          console.log(`åŒºåŸŸ ${regionId} é«˜äº®æ›´æ–°å®Œæˆ`);
        }
      }

      console.log('æ‰€æœ‰é«˜äº®ä½ç½®æ›´æ–°å®Œæˆ');
    }

    // ==================== åˆå§‹åŒ–æ˜ å°„äº‹ä»¶ ====================
    function initMapEvents() {
      const hoverInfo = document.getElementById('hoverInfo');
      const regionName = document.getElementById('regionName');
      const regionBrief = document.getElementById('regionBrief');
      const learnMoreBtn = document.getElementById('learnMoreBtn');

      const areas = document.querySelectorAll('map[name="brain-map-adjusted"] area');

      console.log('åˆå§‹åŒ–äº‹ä»¶ï¼Œæ‰¾åˆ°', areas.length, 'ä¸ªåŒºåŸŸ');

      areas.forEach(area => {
        const regionId = area.getAttribute('data-region');
        const region = brainRegions[regionId];

        if (!region) return;

        // é¼ æ ‡æ‚¬åœäº‹ä»¶
        area.addEventListener('mouseenter', function(e) {
          console.log('é¼ æ ‡è¿›å…¥åŒºåŸŸ:', region.name);
          regionName.textContent = region.name;
          regionBrief.textContent = region.brief;
          learnMoreBtn.style.display = 'block';
          learnMoreBtn.onclick = () => showDetailView(region);
          hoverInfo.classList.add('show');

          // æ˜¾ç¤ºé«˜äº®
          const highlight = highlightElements[regionId];
          if (highlight) {
            highlight.classList.add('active');
            console.log('é«˜äº®å·²æ˜¾ç¤º:', region.name);
          } else {
            console.warn('æ‰¾ä¸åˆ°é«˜äº®å…ƒç´ :', regionId);
          }
        });

        // é¼ æ ‡ç¦»å¼€äº‹ä»¶
        area.addEventListener('mouseleave', function() {
          console.log('é¼ æ ‡ç¦»å¼€åŒºåŸŸ:', region.name);
          hoverInfo.classList.remove('show');
          learnMoreBtn.style.display = 'none';

          // éšè—é«˜äº®
          const highlight = highlightElements[regionId];
          if (highlight) {
            highlight.classList.remove('active');
            console.log('é«˜äº®å·²éšè—:', region.name);
          }
        });

        // ç‚¹å‡»äº‹ä»¶
        area.addEventListener('click', function(e) {
          e.preventDefault();
          console.log('ç‚¹å‡»åŒºåŸŸ:', region.name);
          showDetailView(region);
        });
      });

      // æ·»åŠ é¼ æ ‡ç§»åŠ¨åæ ‡æ˜¾ç¤ºï¼ˆä½†é»˜è®¤éšè—ï¼Œå¼€å‘è€…éœ€è¦æ—¶å¯å¯ç”¨ï¼‰
      brainMap.addEventListener('mousemove', function(e) {
        const rect = this.getBoundingClientRect();
        const x = Math.round(e.clientX - rect.left);
        const y = Math.round(e.clientY - rect.top);

        const coordDisplay = document.getElementById('coordinate-display');
        if (coordDisplay) {
          coordDisplay.textContent = `x: ${x}, y: ${y}`;
          coordDisplay.style.left = `${e.clientX + 10}px`;
          coordDisplay.style.top = `${e.clientY + 10}px`;
        }
      });

      // é»˜è®¤ä¸æ˜¾ç¤ºåæ ‡æ˜¾ç¤ºæ¡†
      document.getElementById('coordinate-display').style.display = 'none';
    }

    // ==================== æ·»åŠ åæ ‡æ˜¾ç¤ºæ¡† ====================
    function addCoordinateDisplay() {
      const coordDisplay = document.createElement('div');
      coordDisplay.id = 'coordinate-display';
      coordDisplay.textContent = 'x: 0, y: 0';
      document.body.appendChild(coordDisplay);
    }

    // ==================== è¯¦ç»†è§†å›¾ ====================
    function showDetailView(region) {
      const detailSection = document.getElementById('detail-section');
      detailSection.classList.add('active');

      document.getElementById('detailRegionName').textContent = region.name;
      document.getElementById('detailLocation').textContent = region.location;
      document.getElementById('detailFunction').textContent = region.function;
      document.getElementById('detailDisease').textContent = region.disease;

      // ç”Ÿæˆåˆ†åŒºå†…å®¹
      const subregionsContainer = document.getElementById('detailSubregions');
      subregionsContainer.innerHTML = '';

      if (region.subregions && region.subregions.length > 0) {
        region.subregions.forEach(item => {
          const subregionItem = document.createElement('div');
          subregionItem.className = 'subregion-item';
          subregionItem.style.cssText = 'background: rgba(255, 255, 255, 0.05); border-radius: 10px; padding: 15px; margin-bottom: 15px; border-left: 4px solid #ffd700;';

          subregionItem.innerHTML = `
            <strong style="color: #ffd700; display: block; margin-bottom: 8px; font-size: 1.2rem;">${item.name}</strong>
            <div style="color: #a8daff; font-style: italic; margin-bottom: 8px; padding-left: 15px; border-left: 2px solid #4ecdc4;">è¯¥åŒºä½äº${region.name}${item.location}</div>
            <div style="color: #fff; opacity: 0.9;">${item.description}</div>
          `;

          subregionsContainer.appendChild(subregionItem);
        });
      } else {
        subregionsContainer.innerHTML = '<p>è¯¥è„‘åŒºæ²¡æœ‰è¿›ä¸€æ­¥çš„åˆ†åŒºã€‚</p>';
      }

      // è®¾ç½®è¯¦ç»†å›¾ç‰‡
      const detailImage = document.getElementById('detail-image');
      detailImage.src = region.imagePath || "images/detail.png";
      detailImage.alt = `${region.name}è¯¦ç»†ç»“æ„å›¾`;

      detailImage.onerror = function() {
        console.warn(`${region.name}å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å›¾ç‰‡`);
        this.src = "images/detail.png";
      };

      console.log(`æ˜¾ç¤ºè¯¦ç»†è§†å›¾: ${region.name}`);
    }

    // ==================== æ˜¾ç¤ºé€šçŸ¥ ====================
    function showNotification(title, message) {
      // ç§»é™¤æ—§çš„é€šçŸ¥
      const oldNotification = document.getElementById('temp-notification');
      if (oldNotification) oldNotification.remove();

      const notification = document.createElement('div');
      notification.id = 'temp-notification';
      notification.style.cssText = `
        position: fixed;
        top: 100px;
        right: 20px;
        background: rgba(0,0,0,0.9);
        color: white;
        padding: 15px 20px;
        border-radius: 10px;
        border-left: 4px solid #ffd700;
        z-index: 2000;
        min-width: 250px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.5);
        animation: slideIn 0.3s ease;
      `;

      notification.innerHTML = `
        <div style="color: #ffd700; font-weight: bold; margin-bottom: 5px;">${title}</div>
        <div style="font-size: 14px; color: #ddd;">${message}</div>
      `;

      document.body.appendChild(notification);

      // 3ç§’åè‡ªåŠ¨ç§»é™¤
      setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease';
        setTimeout(() => notification.remove(), 300);
      }, 3000);
    }

    // ==================== é¡µé¢åˆå§‹åŒ– ====================
    document.addEventListener('DOMContentLoaded', function() {
      console.log('å¤§è„‘äº¤äº’å¼å­¦ä¹ å¹³å°åˆå§‹åŒ–...');

      // åˆå§‹åŒ–å¤§è„‘åœ°å›¾
      initBrainMap();

      // åˆå§‹åŒ–å…¶ä»–åŠŸèƒ½
      initBasicFunctions();

      console.log('åˆå§‹åŒ–å®Œæˆ');
    });

    // ==================== åˆå§‹åŒ–åŸºæœ¬åŠŸèƒ½ ====================
    function initBasicFunctions() {
      // å…³é—­è¯¦ç»†è§†å›¾
      document.getElementById('closeDetail').addEventListener('click', () => {
        document.getElementById('detail-section').classList.remove('active');
      });

      // æ¸¸æˆè·³è½¬
      document.getElementById('game1Btn').addEventListener('click', () => {
        const gameUrl = 'games/xyx1.html';
        window.open(gameUrl, '_blank');
      });

      document.getElementById('game2Btn').addEventListener('click', () => {
        const gameUrl = 'games/xyx3.html';
        window.open(gameUrl, '_blank');
      });

      // è§†é¢‘è·³è½¬
      document.getElementById('video1Btn').addEventListener('click', () => {
        window.open('https://www.bilibili.com/video/BV1ds421M7sY?t=43.1', '_blank');
      });

      document.getElementById('video2Btn').addEventListener('click', () => {
        window.open('https://www.bilibili.com/video/BV1kD4y1X7qA?t=73.5', '_blank');
      });

      // å¹³æ»‘æ»šåŠ¨
      document.querySelectorAll('nav a').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
          e.preventDefault();
          const targetId = this.getAttribute('href');
          const targetSection = document.querySelector(targetId);
          if (targetSection) {
            targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        });
      });

      // æ·»åŠ åŠ¨ç”»æ ·å¼
      const style = document.createElement('style');
      style.textContent = `
        @keyframes slideIn {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }

        @keyframes slideOut {
          from {
            transform: translateX(0);
            opacity: 1;
          }
          to {
            transform: translateX(100%);
            opacity: 0;
          }
        }
      `;
      document.head.appendChild(style);
    }

    // ==================== è°ƒè¯•å‡½æ•°ï¼ˆä¿ç•™ä½†ä¸æ˜¾ç¤ºï¼‰ ====================
    // è¿™äº›å‡½æ•°ä»ç„¶å­˜åœ¨ï¼Œä½†è°ƒè¯•é¢æ¿å·²éšè—
    window.showCurrentParams = function() {
      console.log('å½“å‰å‚æ•°:');
      console.log('ç¼©æ”¾æ¯”ä¾‹:', currentScale);
      console.log('åç§»è·ç¦»:', currentShift);
      console.log('æ¨èå€¼: ç¼©æ”¾ 1.45, åç§» 0');
    };

    window.applyOptimizedParams = function() {
      currentScale = 1.45;
      currentShift = 0;
      createImageMap(currentScale, currentShift);
      initMapEvents();
      showNotification('ä¼˜åŒ–å‚æ•°å·²åº”ç”¨', 'ç¼©æ”¾: 1.45 | åç§»: 0');
    };

    window.testHighlights = function() {
      console.log('æµ‹è¯•é«˜äº®æ•ˆæœ...');

      // éšè—æ‰€æœ‰é«˜äº®
      Object.values(highlightElements).forEach(el => {
        el.classList.remove('active');
      });

      // ä¾æ¬¡æ˜¾ç¤ºæ‰€æœ‰é«˜äº®åŒºåŸŸ
      let index = 0;
      const regionIds = Object.keys(highlightElements);
      const hoverInfo = document.getElementById('hoverInfo');
      const regionName = document.getElementById('regionName');
      const regionBrief = document.getElementById('regionBrief');

      const interval = setInterval(() => {
        // éšè—ä¹‹å‰çš„é«˜äº®
        if (index > 0) {
          const prevId = regionIds[index - 1];
          highlightElements[prevId]?.classList.remove('active');
        }

        // æ˜¾ç¤ºå½“å‰é«˜äº®
        const currentId = regionIds[index];
        const region = brainRegions[currentId];

        if (highlightElements[currentId]) {
          highlightElements[currentId].classList.add('active');

          // æ›´æ–°æç¤ºä¿¡æ¯
          regionName.textContent = region.name;
          regionBrief.textContent = region.brief;
          hoverInfo.classList.add('show');

          console.log(`æ˜¾ç¤ºé«˜äº®: ${region.name}`);
        }

        index++;

        if (index >= regionIds.length) {
          clearInterval(interval);

          // æœ€åéšè—æ‰€æœ‰é«˜äº®
          setTimeout(() => {
            regionIds.forEach(id => {
              highlightElements[id]?.classList.remove('active');
            });
            hoverInfo.classList.remove('show');

            showNotification('é«˜äº®æµ‹è¯•å®Œæˆ', 'æ‰€æœ‰è„‘åŒºé«˜äº®æ•ˆæœå·²æµ‹è¯•');
          }, 1000);
        }
      }, 1000);
    };

    // åº”ç”¨ä¼˜åŒ–å‚æ•°
    setTimeout(() => {
      if (typeof applyOptimizedParams === 'function') {
        applyOptimizedParams();
      }
    }, 500);
  </script>
</body>
</html>